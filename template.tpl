___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Outbrain",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Outbrain server to server conversion tracking",
  "containerContexts": [
    "SERVER"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "RADIO",
    "name": "type",
    "displayName": "Event Type",
    "radioItems": [
      {
        "value": "page_view",
        "displayValue": "PageView"
      },
      {
        "value": "conversion",
        "displayValue": "Conversion"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "page_view",
    "help": "\u003cb\u003ePageView\u003c/b\u003e - stores the {ob_click_id} URL parameter inside the outbrain_cid cookie\u003cbr\u003e\u003cbr\u003e\n\u003cb\u003eConversion\u003c/b\u003e - Send request with data about the conversion to the Outbrain"
  },
  {
    "type": "TEXT",
    "name": "clickIdParameterName",
    "displayName": "Url parameter name for Outbrain ob_click_id",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "page_view",
        "type": "EQUALS"
      }
    ],
    "help": "More info about ob_click_id can be found in the Outbrain \u003ca href\u003d\"https://www.outbrain.com/help/advertisers/server2server-integrations/\" target\u003d\"_blank\"\u003edocumentation\u003c/a\u003e.",
    "defaultValue": "OutbrainClickId"
  },
  {
    "type": "TEXT",
    "name": "expiration",
    "displayName": "Expiration time for the outbrain_cid cookie in seconds.",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "page_view",
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "NON_NEGATIVE_NUMBER"
      }
    ],
    "defaultValue": 2592000,
    "help": "One month by default. Use 0 for saving only for the session."
  },
  {
    "type": "GROUP",
    "name": "conversionGroup",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "TEXT",
        "name": "name",
        "displayName": "Event Name",
        "simpleValueType": true,
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "help": "Event names are case-sensitive."
      },
      {
        "type": "SELECT",
        "name": "orderId",
        "displayName": "Order ID",
        "macrosInSelect": true,
        "selectItems": [],
        "simpleValueType": true,
        "help": "The unique booking or order reference that identifies the transaction.",
        "notSetText": "(not set)"
      },
      {
        "type": "SELECT",
        "name": "orderValue",
        "displayName": "Order Value",
        "macrosInSelect": true,
        "selectItems": [],
        "simpleValueType": true,
        "notSetText": "(not set)"
      },
      {
        "type": "TEXT",
        "name": "currency",
        "displayName": "Currency Code",
        "simpleValueType": true
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "conversion",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "logsGroup",
    "displayName": "Logs Settings",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "RADIO",
        "name": "logType",
        "radioItems": [
          {
            "value": "no",
            "displayValue": "Do not log"
          },
          {
            "value": "debug",
            "displayValue": "Log to console during debug and preview"
          },
          {
            "value": "always",
            "displayValue": "Always log to console"
          }
        ],
        "simpleValueType": true,
        "defaultValue": "debug"
      }
    ],
    "enablingConditions": [
      {
        "paramName": "type",
        "paramValue": "conversion",
        "type": "EQUALS"
      }
    ]
  }
]


___SANDBOXED_JS_FOR_SERVER___

const sendHttpRequest = require('sendHttpRequest');
const setCookie = require('setCookie');
const parseUrl = require('parseUrl');
const JSON = require('JSON');
const getRequestHeader = require('getRequestHeader');
const encodeUriComponent = require('encodeUriComponent');
const getCookieValues = require('getCookieValues');
const getEventData = require('getEventData');

const logToConsole = require('logToConsole');
const getContainerVersion = require('getContainerVersion');
const containerVersion = getContainerVersion();
const isDebug = containerVersion.debugMode;
const isLoggingEnabled = determinateIsLoggingEnabled();
const traceId = getRequestHeader('trace-id');

if (data.type === 'page_view') {
    const url = getEventData('page_location') || getRequestHeader('referer');

    if (url) {
        const value = parseUrl(url).searchParams[data.clickIdParameterName];

        if (value) {
            const options = {
                domain: 'auto',
                path: '/',
                secure: true,
                httpOnly: false
            };

            if (data.expiration > 0) options['max-age'] = data.expiration;

            setCookie('outbrain_cid', value, options, false);
        }
    }

    data.gtmOnSuccess();
} else {
    const outbrain_cid = getCookieValues('outbrain_cid')[0] || '';

    let requestUrl = 'https://tr.outbrain.com/unifiedPixel?ob_click_id=' + enc(outbrain_cid);
        requestUrl = requestUrl + '&name=' + enc(data.name);

    if (data.orderId) {
        requestUrl = requestUrl + '&orderId=' + enc(data.orderId);
    }

    if (data.orderValue) {
        requestUrl = requestUrl + '&orderValue=' + enc(data.orderValue);
    }

    if (data.currency) {
        requestUrl = requestUrl + '&currency=' + enc(data.currency);
    }

    if (isLoggingEnabled) {
        logToConsole(JSON.stringify({
            'Name': 'Outbrain',
            'Type': 'Request',
            'TraceId': traceId,
            'EventName': 'Conversion',
            'RequestMethod': 'GET',
            'RequestUrl': requestUrl,
        }));
    }

    sendHttpRequest(requestUrl, (statusCode, headers, body) => {
        if (isLoggingEnabled) {
            logToConsole(JSON.stringify({
                'Name': 'Outbrain',
                'Type': 'Response',
                'TraceId': traceId,
                'EventName': 'Conversion',
                'ResponseStatusCode': statusCode,
                'ResponseHeaders': headers,
                'ResponseBody': body,
            }));
        }

        if (statusCode >= 200 && statusCode < 300) {
            data.gtmOnSuccess();
        } else {
            data.gtmOnFailure();
        }
    }, {method: 'GET'});
}

function enc(data) {
    data = data || '';
    return encodeUriComponent(data);
}

function determinateIsLoggingEnabled() {
    if (!data.logType) {
        return isDebug;
    }

    if (data.logType === 'no') {
        return false;
    }

    if (data.logType === 'debug') {
        return isDebug;
    }

    return data.logType === 'always';
}


___SERVER_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "read_event_data",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keyPatterns",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "page_location"
              }
            ]
          }
        },
        {
          "key": "eventDataAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_http",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://tr.outbrain.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "set_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedCookies",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "name"
                  },
                  {
                    "type": 1,
                    "string": "domain"
                  },
                  {
                    "type": 1,
                    "string": "path"
                  },
                  {
                    "type": 1,
                    "string": "secure"
                  },
                  {
                    "type": 1,
                    "string": "session"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "outbrain_cid"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "*"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  },
                  {
                    "type": 1,
                    "string": "any"
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_request",
        "versionId": "1"
      },
      "param": [
        {
          "key": "headerWhitelist",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "trace-id"
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "headerName"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "referer"
                  }
                ]
              }
            ]
          }
        },
        {
          "key": "headersAllowed",
          "value": {
            "type": 8,
            "boolean": true
          }
        },
        {
          "key": "requestAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "headerAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "queryParameterAccess",
          "value": {
            "type": 1,
            "string": "any"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "get_cookies",
        "versionId": "1"
      },
      "param": [
        {
          "key": "cookieAccess",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "cookieNames",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "outbrain_cid"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "read_container_data",
        "versionId": "1"
      },
      "param": []
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 10/11/2021, 09:29:27


